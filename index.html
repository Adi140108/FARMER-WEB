<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Smart Irrigation Advisor ‚Äî Crop Duration & Forecast Aware</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg,#021a31,#04431a);
    color:#fff; text-align:center; padding:30px;
  }
  .card {
    background:rgba(255,255,255,0.12);
    padding:25px; border-radius:12px;
    max-width:700px; margin:auto;
    box-shadow:0 6px 18px rgba(0,0,0,0.25);
  }
  select, input, button {
    padding:10px; border-radius:8px; border:none; margin:8px 6px;
  }
  select, input { width:70%; }
  button { background:#0984e3; color:#fff; cursor:pointer; }
  button:hover { background:#74b9ff; }
  .output {
    text-align:left; background:rgba(255,255,255,0.07);
    padding:15px; border-radius:10px; margin-top:15px;
  }
  small { opacity:0.9; }
</style>
</head>
<body>

<div class="card">
  <h1>üåæ Smart Irrigation Advisor</h1>
  <p>Select your crop and enter the <b>running month of the plant</b> (‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§Æ‡§π‡•Ä‡§®‡§æ / ‡≤∏‡≤∏‡≥ç‡≤Ø‡≤¶ ‡≤™‡≥ç‡≤∞‡≤ó‡≤§‡≤ø‡≤Ø ‡≤§‡≤ø‡≤Ç‡≤ó‡≤≥‡≥Å)</p>

  <select id="cropSel">
    <option value="">-- Select Crop --</option>
    <option value="Rice">Rice - ‡§ß‡§æ‡§® - ‡≤Ö‡≤ï‡≥ç‡≤ï‡≤ø</option>
    <option value="Wheat">Wheat - ‡§ó‡•á‡§π‡•Ç‡§Ç - ‡≤ó‡≥ã‡≤ß‡≤ø</option>
    <option value="Sugarcane">Sugarcane - ‡§ó‡§®‡•ç‡§®‡§æ - ‡≤ï‡≤¨‡≥ç‡≤¨‡≥Å</option>
    <option value="Maize">Maize - ‡§Æ‡§ï‡•ç‡§ï‡§æ - ‡≤ú‡≥ã‡≤≥</option>
    <option value="Cotton">Cotton - ‡§ï‡§™‡§æ‡§∏ - ‡≤π‡≤§‡≥ç‡≤§‡≤ø</option>
    <option value="Pulses">Pulses - ‡§¶‡§æ‡§≤‡•á‡§Ç - ‡≤¨‡≥á‡≤≥‡≥Ü</option>
    <option value="Groundnut">Groundnut - ‡§Æ‡•Ç‡§Ç‡§ó‡§´‡§≤‡•Ä - ‡≤ï‡≤°‡≤≤‡≥Ü‡≤ï‡≤æ‡≤Ø‡≤ø</option>
    <option value="Millets">Millets - ‡§¨‡§æ‡§ú‡§∞‡§æ - ‡≤∏‡≤ú‡≥ç‡≤ú‡≥Ü</option>
    <option value="Soybean">Soybean - ‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§® - ‡≤∏‡≥ã‡≤Ø‡≤æ‡≤¨‡≥Ä‡≤®‡≥ç</option>
    <option value="Sunflower">Sunflower - ‡§∏‡•Ç‡§∞‡§ú‡§Æ‡•Å‡§ñ‡•Ä - ‡≤∏‡≥Ç‡≤∞‡≥ç‡≤Ø‡≤ï‡≤æ‡≤Ç‡≤§‡≤ø</option>
    <option value="Onion">Onion - ‡§™‡•ç‡§Ø‡§æ‡§ú - ‡≤à‡≤∞‡≥Å‡≤≥‡≥ç‡≤≥‡≤ø</option>
    <option value="Tomato">Tomato - ‡§ü‡§Æ‡§æ‡§ü‡§∞ - ‡≤ü‡≥ä‡≤Æ‡≥Ü‡≤ü‡≥ä</option>
  </select><br>

  <input id="growthMonth" type="number" min="1" max="12" placeholder="Running month (1‚Äì6)" />
  <br/>
  <input id="sensorInput" type="number" min="0" max="100"
         placeholder="Soil sensor value (0‚Äì100) ‚Äî optional" />
  <br/>
  <small>Leave blank to simulate soil moisture.</small>
  <br/>
  <button onclick="checkIrrigation()">Check Irrigation</button>

  <div class="output" id="output"></div>
</div>

<script>
/* Crop-specific moisture targets and growth durations (months) */
const cropSettings = {
  Rice:{target:65,name:"Rice - ‡§ß‡§æ‡§® - ‡≤Ö‡≤ï‡≥ç‡≤ï‡≤ø",duration:4},
  Wheat:{target:45,name:"Wheat - ‡§ó‡•á‡§π‡•Ç‡§Ç - ‡≤ó‡≥ã‡≤ß‡≤ø",duration:5},
  Sugarcane:{target:60,name:"Sugarcane - ‡§ó‡§®‡•ç‡§®‡§æ - ‡≤ï‡≤¨‡≥ç‡≤¨‡≥Å",duration:12},
  Maize:{target:40,name:"Maize - ‡§Æ‡§ï‡•ç‡§ï‡§æ - ‡≤ú‡≥ã‡≤≥",duration:4},
  Cotton:{target:30,name:"Cotton - ‡§ï‡§™‡§æ‡§∏ - ‡≤π‡≤§‡≥ç‡≤§‡≤ø",duration:6},
  Pulses:{target:30,name:"Pulses - ‡§¶‡§æ‡§≤‡•á‡§Ç - ‡≤¨‡≥á‡≤≥‡≥Ü",duration:3},
  Groundnut:{target:35,name:"Groundnut - ‡§Æ‡•Ç‡§Ç‡§ó‡§´‡§≤‡•Ä - ‡≤ï‡≤°‡≤≤‡≥Ü‡≤ï‡≤æ‡≤Ø‡≤ø",duration:5},
  Millets:{target:25,name:"Millets - ‡§¨‡§æ‡§ú‡§∞‡§æ - ‡≤∏‡≤ú‡≥ç‡≤ú‡≥Ü",duration:3},
  Soybean:{target:40,name:"Soybean - ‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§® - ‡≤∏‡≥ã‡≤Ø‡≤æ‡≤¨‡≥Ä‡≤®‡≥ç",duration:4},
  Sunflower:{target:35,name:"Sunflower - ‡§∏‡•Ç‡§∞‡§ú‡§Æ‡•Å‡§ñ‡•Ä - ‡≤∏‡≥Ç‡≤∞‡≥ç‡≤Ø‡≤ï‡≤æ‡≤Ç‡≤§‡≤ø",duration:4},
  Onion:{target:50,name:"Onion - ‡§™‡•ç‡§Ø‡§æ‡§ú - ‡≤à‡≤∞‡≥Å‡≤≥‡≥ç‡≤≥‡≤ø",duration:5},
  Tomato:{target:45,name:"Tomato - ‡§ü‡§Æ‡§æ‡§ü‡§∞ - ‡≤ü‡≥ä‡≤Æ‡≥Ü‡≤ü‡≥ä",duration:4}
};

const API_KEY="8fb2a093513741f0a07160359251110";
const RAIN_THRESHOLD=2,HUM_THRESHOLD=80,DELTA=7;

/* Determine stage by crop duration and running month */
function getStageByMonth(crop,month){
  const total=cropSettings[crop].duration;
  const ratio=month/total;
  if(ratio<=0.25) return {mul:1.2,stage:"Early Growth"};
  if(ratio<=0.5) return {mul:1.1,stage:"Vegetative Growth"};
  if(ratio<=0.75) return {mul:1.0,stage:"Flowering"};
  return {mul:0.9,stage:"Ripening/Harvest"};
}

/* Stage description multilingual */
function getStageDescription(stage){
  switch(stage){
    case "Early Growth":
      return {
        en:"üå± Crop is in early growth stage ‚Äî maintain proper soil moisture.",
        hi:"üå± ‡§´‡§∏‡§≤ ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠‡§ø‡§ï ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§ö‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§π‡•à ‚Äî ‡§â‡§ö‡§ø‡§§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§®‡§Æ‡•Ä ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç‡•§",
        kn:"üå± ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤™‡≥ç‡≤∞‡≤æ‡≤∞‡≤Ç‡≤≠‡≤ø‡≤ï ‡≤¨‡≥Ü‡≤≥‡≤µ‡≤£‡≤ø‡≤ó‡≥Ü‡≤Ø ‡≤π‡≤Ç‡≤§‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø‡≤¶‡≥Ü ‚Äî ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤Æ‡≤£‡≥ç‡≤£‡≤ø‡≤® ‡≤§‡≥á‡≤µ‡≤§‡≥Ü ‡≤ï‡≤æ‡≤™‡≤æ‡≤°‡≤ø."
      };
    case "Vegetative Growth":
      return {
        en:"üåø Crop is in vegetative growth stage ‚Äî requires moderate irrigation.",
        hi:"üåø ‡§´‡§∏‡§≤ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§ö‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§π‡•à ‚Äî ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§",
        kn:"üåø ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤¨‡≥Ü‡≤≥‡≤µ‡≤£‡≤ø‡≤ó‡≥Ü‡≤Ø ‡≤π‡≤Ç‡≤§‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø‡≤¶‡≥Ü ‚Äî ‡≤Æ‡≤ß‡≥ç‡≤Ø‡≤Æ ‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø ‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø‡≤µ‡≤ø‡≤¶‡≥Ü."
      };
    case "Flowering":
      return {
        en:"üå∏ Crop is in flowering stage ‚Äî ensure regular moisture.",
        hi:"üå∏ ‡§´‡§∏‡§≤ ‡§´‡•Ç‡§≤‡§®‡•á ‡§ï‡•á ‡§ö‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§π‡•à ‚Äî ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§®‡§Æ‡•Ä ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç‡•§",
        kn:"üå∏ ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤π‡≥Ç ‡≤¨‡≥Ä‡≤≥‡≥Å‡≤µ ‡≤π‡≤Ç‡≤§‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø‡≤¶‡≥Ü ‚Äî ‡≤®‡≤ø‡≤∞‡≤Ç‡≤§‡≤∞ ‡≤§‡≥á‡≤µ‡≤§‡≥Ü ‡≤ï‡≤æ‡≤™‡≤æ‡≤°‡≤ø."
      };
    default:
      return {
        en:"üåæ Crop is in ripening stage ‚Äî reduce irrigation gradually.",
        hi:"üåæ ‡§´‡§∏‡§≤ ‡§™‡§ï‡§®‡•á ‡§ï‡•á ‡§ö‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§π‡•à ‚Äî ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§",
        kn:"üåæ ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤™‡≤ï‡≥ç‡≤µ ‡≤π‡≤Ç‡≤§‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø‡≤¶‡≥Ü ‚Äî ‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤Ç‡≤§ ‡≤π‡≤Ç‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø."
      };
  }
}

/* Multilingual irrigation advice */
function multilingualAdvice(level,target,forecastRain){
  if(forecastRain){
    return {
      en:`üåß Rain expected tomorrow ‚Äî delay irrigation.`,
      hi:`üåß ‡§ï‡§≤ ‡§µ‡§∞‡•ç‡§∑‡§æ ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ ‡§π‡•à ‚Äî ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§∏‡•ç‡§•‡§ó‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§`,
      kn:`üåß ‡≤®‡≤æ‡≤≥‡≥Ü ‡≤Æ‡≤≥‡≥Ü ‡≤®‡≤ø‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≥Ü‡≤Ø‡≤ø‡≤¶‡≥Ü ‚Äî ‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø ‡≤µ‡≤ø‡≤≥‡≤Ç‡≤¨‡≤ó‡≥ä‡≤≥‡≤ø‡≤∏‡≤ø.`
    };
  }
  if(level==="no") return {
    en:`üíß No irrigation needed ‚Äî weather is humid or rainy.`,
    hi:`üíß ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‚Äî ‡§Æ‡•å‡§∏‡§Æ ‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞ ‡§Ø‡§æ ‡§¨‡§∞‡§∏‡§æ‡§§‡•Ä ‡§π‡•à‡•§`,
    kn:`üíß ‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø ‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤ ‚Äî ‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤® ‡≤§‡≥á‡≤µ ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤Æ‡≤≥‡≥Ü‡≤Ø‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.`
  };
  if(level==="light") return {
    en:`‚ö†Ô∏è Soil slightly below target (${target}%) ‚Äî consider light irrigation.`,
    hi:`‚ö†Ô∏è ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡•ç‡§§‡§∞ (${target}%) ‡§∏‡•á ‡§•‡•ã‡§°‡§º‡•Ä ‡§ï‡§Æ ‡§π‡•à ‚Äî ‡§π‡§≤‡•ç‡§ï‡•Ä ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§`,
    kn:`‚ö†Ô∏è ‡≤Æ‡≤£‡≥ç‡≤£‡≥Å ‡≤ó‡≥Å‡≤∞‡≤ø (${target}%) ‡≤ó‡≤ø‡≤Ç‡≤§ ‡≤∏‡≥ç‡≤µ‡≤≤‡≥ç‡≤™ ‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‚Äî ‡≤∏‡≤£‡≥ç‡≤£ ‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø ‡≤™‡≤∞‡≤ø‡≤ó‡≤£‡≤ø‡≤∏‡≤ø.`
  };
  return {
    en:`üöú Soil below target (${target}%) ‚Äî irrigation recommended.`,
    hi:`üöú ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡•ç‡§§‡§∞ (${target}%) ‡§∏‡•á ‡§ï‡§Æ ‡§π‡•à ‚Äî ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§`,
    kn:`üöú ‡≤Æ‡≤£‡≥ç‡≤£‡≥Å ‡≤ó‡≥Å‡≤∞‡≤ø (${target}%) ‡≤ó‡≤ø‡≤Ç‡≤§ ‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‚Äî ‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø ‡≤∂‡≤ø‡≤´‡≤æ‡≤∞‡≤∏‡≥Å ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.`
  };
}

/* Main logic */
async function checkIrrigation(){
  const cropKey=document.getElementById("cropSel").value;
  const month=parseInt(document.getElementById("growthMonth").value);
  const out=document.getElementById("output");
  out.innerHTML="<p>Checking...</p>";

  if(!cropKey){out.innerHTML="<p>Please select a crop.</p>";return;}
  if(!month){out.innerHTML="<p>Please enter the running month of the crop.</p>";return;}

  const crop=cropSettings[cropKey];
  if(month>crop.duration){
    out.innerHTML=`<p>This crop (${crop.name}) usually matures in ${crop.duration} months. Please enter a valid running month (1-${crop.duration}).</p>`;
    return;
  }

  const stageInfo=getStageByMonth(cropKey,month);
  const adjTarget=Math.round(crop.target*stageInfo.mul);
  const stageDesc=getStageDescription(stageInfo.stage);

  if(!navigator.geolocation){
    out.innerHTML="<p>Geolocation not supported.</p>";return;
  }

  navigator.geolocation.getCurrentPosition(async pos=>{
    try{
      const lat=pos.coords.latitude, lon=pos.coords.longitude;
      const res=await fetch(`https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${lat},${lon}&aqi=no`);
      const data=await res.json();

      const forecastRes=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${lat},${lon}&days=2&aqi=no&alerts=no`);
      const forecast=await forecastRes.json();
      const tomorrowRain=forecast.forecast.forecastday[1].day.totalprecip_mm;

      const temp=data.current.temp_c, hum=data.current.humidity;
      const cond=data.current.condition.text, rain=data.current.precip_mm;

      let soil=document.getElementById("sensorInput").value;
      soil=soil?Number(soil):Math.round(10+Math.random()*70);

      let level="yes";
      let forecastRain=false;

      if(tomorrowRain>3){ forecastRain=true; }
      else if(rain>RAIN_THRESHOLD||hum>HUM_THRESHOLD) level="no";
      else if(soil>=adjTarget) level="no";
      else if(adjTarget-soil<=DELTA) level="light";

      const adv=multilingualAdvice(level,adjTarget,forecastRain);

      out.innerHTML=`
        <h3>Results ‚Äî ${crop.name}</h3>
        <p><strong>Running Month:</strong> ${month} / ${crop.duration} | <strong>Stage:</strong> ${stageInfo.stage}</p>
        <p><strong>Weather:</strong> ${cond}<br>
        <strong>Temp:</strong> ${temp}¬∞C | <strong>Humidity:</strong> ${hum}% | <strong>Rain Today:</strong> ${rain} mm</p>
        <p><strong>Forecast Rain (Tomorrow):</strong> ${tomorrowRain} mm</p>
        <p><strong>Soil Moisture:</strong> ${soil}% | <strong>Target:</strong> ${adjTarget}%</p>
        <hr>
        <h3>Advice</h3>
        <p>${adv.en}<br>${adv.hi}<br>${adv.kn}</p>
        <hr>
        <h3>Stage Information</h3>
        <p>${stageDesc.en}<br>${stageDesc.hi}<br>${stageDesc.kn}</p>`;
    }catch(e){
      out.innerHTML="<p>Error fetching weather data.</p>";
    }
  },()=>{out.innerHTML="<p>Please enable location access.</p>";});
}

</script>
 <footer>
        ¬† ¬† ¬† ¬† &copy; HYDRO HERO
        ¬† ¬† </footer>
</body>
</html>
